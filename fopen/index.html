<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
   <meta http-equiv="Content-Type" content="text/html;charset=UTF-8" />
   <title>BrowserID</title>
   <script src="https://browserid.org/include.js"></script>
   <style type="text/css">
    h1,h2,h3,body { font-family:'gill sans','dejavu sans',verdana,sans-serif; }
    h1 { font-family:menlo,'dejavu sans mono',monospace; }
    h1 {
      font-weight:bold;
      font-size:43px;
      letter-spacing: -1px;
      color:#000;
      margin-bottom:0;
      position:relative;
    }
   button{border:none;background:transparent;margin:0 2em;}
   </style>
</head>
<body>
<h1><b>BrowserID</b> is an <b>easier</b> way to sign in</h1>
<form action="login.php" method="post" id="browserid_form">
<input type="hidden" name="assertion" value="" id="browserid_assertion">
<button type="submit"><img src="https://browserid.org/i/sign_in_green.png" alt="sign in with browser ID"></button>
</form>

<script type="text/javascript">

var $ = function(id){ return document.getElementById(id) }

$('browserid_form').onsubmit = function() {   

   navigator.id.getVerifiedEmail(function(assertion){

             if(assertion) {

               $('browserid_assertion').value = assertion

               $('browserid_form').submit()

             } else {

               alert('Could not complete identification')

             }
   })
   
   return false
}
</script>
</body>
</html>

